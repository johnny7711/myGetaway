export const state = () => ({
  shops: [
    {
      id: "ChIJo8i9EniLGGAR8mRHsCD2lxM",
      name: "BENJAMIN STEAK HOUSE 六本木（ベンジャミンステーキハウス）",
      address:
        "日本、〒106-0032 東京都港区六本木７丁目１４-４ レム六本木ビル B1F",
      position: { lat: 35.6637787, lng: 139.7314888 },
      budget: 3,
      phone: "050-3187-9089",
      open: [
        [
          {
            close: {
              day: 0,
              time: "1500"
            },
            open: {
              day: 0,
              time: "1130"
            }
          },
          {
            close: {
              day: 0,
              time: "2000"
            },
            open: {
              day: 0,
              time: "1630"
            }
          }
        ],
        [
          {
            close: {
              day: 1,
              time: "1500"
            },
            open: {
              day: 1,
              time: "1130"
            }
          },
          {
            close: {
              day: 1,
              time: "2000"
            },
            open: {
              day: 1,
              time: "1700"
            }
          }
        ],
        [
          {
            close: {
              day: 2,
              time: "1500"
            },
            open: {
              day: 2,
              time: "1130"
            }
          },
          {
            close: {
              day: 2,
              time: "2000"
            },
            open: {
              day: 2,
              time: "1630"
            }
          }
        ],
        [
          {
            close: {
              day: 3,
              time: "1500"
            },
            open: {
              day: 3,
              time: "1130"
            }
          },
          {
            close: {
              day: 3,
              time: "2000"
            },
            open: {
              day: 3,
              time: "1700"
            }
          }
        ],
        [
          {
            close: {
              day: 4,
              time: "1500"
            },
            open: {
              day: 4,
              time: "1130"
            }
          },
          {
            close: {
              day: 4,
              time: "2000"
            },
            open: {
              day: 4,
              time: "1700"
            }
          }
        ],
        [
          {
            close: {
              day: 5,
              time: "1500"
            },
            open: {
              day: 5,
              time: "1130"
            }
          },
          {
            close: {
              day: 5,
              time: "2000"
            },
            open: {
              day: 5,
              time: "1700"
            }
          }
        ],
        [
          {
            close: {
              day: 6,
              time: "1500"
            },
            open: {
              day: 6,
              time: "1130"
            }
          },
          {
            close: {
              day: 6,
              time: "2000"
            },
            open: {
              day: 6,
              time: "1630"
            }
          }
        ]
      ],
      createdBy: "Johnny",
      lovers: [
        { name: "Johnny", avatar: "/avatar/avatar-3.jpg" },
        { name: "Mike", avatar: "/avatar/avatar-5.jpg" },
        { name: "Gomes", avatar: "/avatar/avatar-1.jpg" },
        { name: "Steph", avatar: "/avatar/avatar-2.jpg" },
        { name: "Chris", avatar: "/avatar/avatar-7.jpg" }
      ],
      website: "https://benjaminsteakhouse-roppongi.gorp.jp/",
      tags: ["ステーキ", "記念日", "高級"],
      comments: [
        {
          name: "Johnny",
          avatar: "/avatar/avatar-4.jpg",
          comment: "ステーキがおいしい"
        },
        {
          name: "Gomes",
          avatar: "/avatar/avatar-1.jpg",
          comment: "記念日に最高"
        },
        {
          name: "Gomes",
          avatar: "/avatar/avatar-1.jpg",
          comment: "記念日に最高"
        },
        {
          name: "Gomes",
          avatar: "/avatar/avatar-1.jpg",
          comment: "記念日に最高"
        },
        {
          name: "Sara",
          avatar: "/avatar/avatar-4.jpg",
          comment: "ステーキがおいしい"
        },
        {
          name: "Gomes",
          avatar: "/avatar/avatar-1.jpg",
          comment: "記念日に最高"
        },
        {
          name: "Gomes",
          avatar: "/avatar/avatar-1.jpg",
          comment: "記念日に最高"
        },
        {
          name: "Gomes",
          avatar: "/avatar/avatar-1.jpg",
          comment: "記念日に最高"
        },
        {
          name: "Sara",
          avatar: "/avatar/avatar-4.jpg",
          comment: "ステーキがおいしい"
        },
        {
          name: "Gomes",
          avatar: "/avatar/avatar-1.jpg",
          comment: "記念日に最高"
        },
        {
          name: "Gomes",
          avatar: "/avatar/avatar-1.jpg",
          comment: "記念日に最高"
        },
        {
          name: "Gomes",
          avatar: "/avatar/avatar-1.jpg",
          comment: "記念日に最高"
        }
      ],
      photos: [
        {
          _id: "01234",
          src: "https://picsum.photos/500/300?image=15",
          createdBy: "Johnny"
        },
        {
          _id: "45678",
          src: "https://picsum.photos/500/300?image=20",
          createdBy: "Johnny"
        },
        {
          _id: "00000",
          src: "https://picsum.photos/500/300?image=25",
          createdBy: "Sara"
        }
      ]
    },
    {
      id: "ChIJ5xmsJuqLGGARtS8k-yfq2qU",
      name: "鶴松1号店",
      address: "日本、〒105-0004 東京都港区新橋３丁目１６-８",
      position: { lat: 35.6655455, lng: 139.7572739 },
      budget: 1,
      phone: "03-6809-1087",
      open: [
        [{ close: { day: 0, time: "2230" }, open: { day: 0, time: "1200" } }],
        [{ close: { day: 1, time: "2230" }, open: { day: 1, time: "1200" } }],
        [{ close: { day: 2, time: "2230" }, open: { day: 2, time: "1200" } }],
        [{ close: { day: 3, time: "2230" }, open: { day: 3, time: "1200" } }],
        [{ close: { day: 4, time: "2230" }, open: { day: 4, time: "1200" } }],
        [{ close: { day: 5, time: "2230" }, open: { day: 5, time: "1200" } }],
        [{ close: { day: 6, time: "2230" }, open: { day: 6, time: "1200" } }]
      ],
      createdBy: "Sara",
      lovers: [
        { name: "Sara", avatar: "/avatar/avatar-4.jpg" },
        { name: "Mike", avatar: "/avatar/avatar-5.jpg" }
      ],
      website: "https://maps.google.com/?cid=11951122018619109301",
      tags: ["焼肉", "安い"],
      comments: [],
      photos: [
        {
          src: "https://picsum.photos/500/300?image=25",
          createdBy: "Sara"
        }
      ]
    },
    {
      id: "ChIJhTy4dMeMGGARcjDo3VUuqzs",
      name: "つるまる 千駄ヶ谷店",
      address:
        "日本、〒151-0051 東京都渋谷区千駄ケ谷４丁目２７−１ 代々木神宮外苑ビル 1F",
      position: { lat: 35.6807188, lng: 139.7043636 },
      budget: 2,
      phone: "050-3187-9089",
      open: [
        [
          {
            close: {
              day: 0,
              time: "1500"
            },
            open: {
              day: 0,
              time: "1130"
            }
          },
          {
            close: {
              day: 0,
              time: "2000"
            },
            open: {
              day: 0,
              time: "1630"
            }
          }
        ],
        [
          {
            close: {
              day: 1,
              time: "1500"
            },
            open: {
              day: 1,
              time: "1130"
            }
          },
          {
            close: {
              day: 1,
              time: "2000"
            },
            open: {
              day: 1,
              time: "1700"
            }
          }
        ],
        [
          {
            close: {
              day: 2,
              time: "1500"
            },
            open: {
              day: 2,
              time: "1130"
            }
          },
          {
            close: {
              day: 2,
              time: "2000"
            },
            open: {
              day: 2,
              time: "1630"
            }
          }
        ],
        [
          {
            close: {
              day: 3,
              time: "1500"
            },
            open: {
              day: 3,
              time: "1130"
            }
          },
          {
            close: {
              day: 3,
              time: "2000"
            },
            open: {
              day: 3,
              time: "1700"
            }
          }
        ],
        [
          {
            close: {
              day: 4,
              time: "1500"
            },
            open: {
              day: 4,
              time: "1130"
            }
          },
          {
            close: {
              day: 4,
              time: "2000"
            },
            open: {
              day: 4,
              time: "1700"
            }
          }
        ],
        [
          {
            close: {
              day: 5,
              time: "1500"
            },
            open: {
              day: 5,
              time: "1130"
            }
          },
          {
            close: {
              day: 5,
              time: "2000"
            },
            open: {
              day: 5,
              time: "1700"
            }
          }
        ],
        [
          {
            close: {
              day: 6,
              time: "1500"
            },
            open: {
              day: 6,
              time: "1130"
            }
          },
          {
            close: {
              day: 6,
              time: "2000"
            },
            open: {
              day: 6,
              time: "1630"
            }
          }
        ]
      ],
      createdBy: "Sara",
      lovers: [
        { name: "Sara", avatar: "/avatar/avatar-4.jpg" },
        { name: "Mike", avatar: "/avatar/avatar-5.jpg" }
      ],
      website: "https://benjaminsteakhouse-roppongi.gorp.jp/",
      tags: ["安い", "中華"],
      comments: [
        {
          name: "Sara",
          avatar: "/avatar/avatar-4.jpg",
          comment: "ステーキがおいしい"
        },
        {
          name: "Gomes",
          avatar: "/avatar/avatar-1.jpg",
          comment: "記念日に最高"
        },
        {
          name: "Gomes",
          avatar: "/avatar/avatar-1.jpg",
          comment: "記念日に最高"
        },
        {
          name: "Gomes",
          avatar: "/avatar/avatar-1.jpg",
          comment: "記念日に最高"
        },
        {
          name: "Sara",
          avatar: "/avatar/avatar-4.jpg",
          comment: "ステーキがおいしい"
        },
        {
          name: "Gomes",
          avatar: "/avatar/avatar-1.jpg",
          comment: "記念日に最高"
        },
        {
          name: "Gomes",
          avatar: "/avatar/avatar-1.jpg",
          comment: "記念日に最高"
        },
        {
          name: "Gomes",
          avatar: "/avatar/avatar-1.jpg",
          comment: "記念日に最高"
        },
        {
          name: "Sara",
          avatar: "/avatar/avatar-4.jpg",
          comment: "ステーキがおいしい"
        },
        {
          name: "Gomes",
          avatar: "/avatar/avatar-1.jpg",
          comment: "記念日に最高"
        },
        {
          name: "Gomes",
          avatar: "/avatar/avatar-1.jpg",
          comment: "記念日に最高"
        },
        {
          name: "Gomes",
          avatar: "/avatar/avatar-1.jpg",
          comment: "記念日に最高"
        }
      ],
      photos: [
        {
          src: "https://picsum.photos/500/300?image=15",
          createdBy: "Johnny"
        },
        {
          src: "https://picsum.photos/500/300?image=20",
          createdBy: "Johnny"
        },
        {
          src: "https://picsum.photos/500/300?image=25",
          createdBy: "Sara"
        }
      ]
    }
  ],
  checkLists: [],
  myLists: [
    {
      id: "ChIJo8i9EniLGGAR8mRHsCD2lxM",
      name: "BENJAMIN STEAK HOUSE 六本木（ベンジャミンステーキハウス）",
      address:
        "日本、〒106-0032 東京都港区六本木７丁目１４-４ レム六本木ビル B1F",
      position: { lat: 35.6637787, lng: 139.7314888 },
      budget: 3,
      phone: "050-3187-9089",
      open: [
        [
          {
            close: {
              day: 0,
              time: "1500"
            },
            open: {
              day: 0,
              time: "1130"
            }
          },
          {
            close: {
              day: 0,
              time: "2000"
            },
            open: {
              day: 0,
              time: "1630"
            }
          }
        ],
        [
          {
            close: {
              day: 1,
              time: "1500"
            },
            open: {
              day: 1,
              time: "1130"
            }
          },
          {
            close: {
              day: 1,
              time: "2000"
            },
            open: {
              day: 1,
              time: "1700"
            }
          }
        ],
        [
          {
            close: {
              day: 2,
              time: "1500"
            },
            open: {
              day: 2,
              time: "1130"
            }
          },
          {
            close: {
              day: 2,
              time: "2000"
            },
            open: {
              day: 2,
              time: "1630"
            }
          }
        ],
        [
          {
            close: {
              day: 3,
              time: "1500"
            },
            open: {
              day: 3,
              time: "1130"
            }
          },
          {
            close: {
              day: 3,
              time: "2000"
            },
            open: {
              day: 3,
              time: "1700"
            }
          }
        ],
        [
          {
            close: {
              day: 4,
              time: "1500"
            },
            open: {
              day: 4,
              time: "1130"
            }
          },
          {
            close: {
              day: 4,
              time: "2000"
            },
            open: {
              day: 4,
              time: "1700"
            }
          }
        ],
        [
          {
            close: {
              day: 5,
              time: "1500"
            },
            open: {
              day: 5,
              time: "1130"
            }
          },
          {
            close: {
              day: 5,
              time: "2000"
            },
            open: {
              day: 5,
              time: "1700"
            }
          }
        ],
        [
          {
            close: {
              day: 6,
              time: "1500"
            },
            open: {
              day: 6,
              time: "1130"
            }
          },
          {
            close: {
              day: 6,
              time: "2000"
            },
            open: {
              day: 6,
              time: "1630"
            }
          }
        ]
      ],
      createdBy: "Johnny",
      lovers: [
        { name: "Johnny", avatar: "/avatar/avatar-3.jpg" },
        { name: "Mike", avatar: "/avatar/avatar-5.jpg" },
        { name: "Gomes", avatar: "/avatar/avatar-1.jpg" },
        { name: "Steph", avatar: "/avatar/avatar-2.jpg" },
        { name: "Chris", avatar: "/avatar/avatar-7.jpg" }
      ],
      website: "https://benjaminsteakhouse-roppongi.gorp.jp/",
      tags: ["ステーキ", "記念日", "高級"],
      comments: [
        {
          name: "Sara",
          avatar: "/avatar/avatar-4.jpg",
          comment: "ステーキがおいしい"
        },
        {
          name: "Gomes",
          avatar: "/avatar/avatar-1.jpg",
          comment: "記念日に最高"
        },
        {
          name: "Gomes",
          avatar: "/avatar/avatar-1.jpg",
          comment: "記念日に最高"
        },
        {
          name: "Gomes",
          avatar: "/avatar/avatar-1.jpg",
          comment: "記念日に最高"
        },
        {
          name: "Sara",
          avatar: "/avatar/avatar-4.jpg",
          comment: "ステーキがおいしい"
        },
        {
          name: "Gomes",
          avatar: "/avatar/avatar-1.jpg",
          comment: "記念日に最高"
        },
        {
          name: "Gomes",
          avatar: "/avatar/avatar-1.jpg",
          comment: "記念日に最高"
        },
        {
          name: "Gomes",
          avatar: "/avatar/avatar-1.jpg",
          comment: "記念日に最高"
        },
        {
          name: "Sara",
          avatar: "/avatar/avatar-4.jpg",
          comment: "ステーキがおいしい"
        },
        {
          name: "Gomes",
          avatar: "/avatar/avatar-1.jpg",
          comment: "記念日に最高"
        },
        {
          name: "Gomes",
          avatar: "/avatar/avatar-1.jpg",
          comment: "記念日に最高"
        },
        {
          name: "Gomes",
          avatar: "/avatar/avatar-1.jpg",
          comment: "記念日に最高"
        }
      ],
      photos: [
        {
          _id: "01234",
          src: "https://picsum.photos/500/300?image=15",
          createdBy: "Johnny"
        },
        {
          _id: "45678",
          src: "https://picsum.photos/500/300?image=20",
          createdBy: "Johnny"
        },
        {
          _id: "00000",
          src: "https://picsum.photos/500/300?image=25",
          createdBy: "Sara"
        }
      ]
    }
  ],
  tagsSelections: [
    "ステージ",
    "ステーキ",
    "記念日",
    "高級",
    "中華",
    "焼肉",
    "パーティ",
    "女子会",
    "インスタ",
    "映え",
    "おしゃれ",
    "男子",
    "B級",
    "グルメ",
    "隠れ家",
    "三ツ星",
    "ミシュラン",
    "デート",
    "インスタグラム"
  ],
  filterQuery: {
    tags: [],
    budget: null,
    users: []
  },
  selectedShop: null
});

export const mutations = {
  setFilterQuery(state, query) {
    state.filterQuery = { ...query };
  },
  setSelectedShop(state, value) {
    state.selectedShop = value;
  },
  addShop(state, value) {
    state.shops.push(value);
  },
  addCheckLists(state, value) {
    state.checkLists.push(value);
  },
  addMyLists(state, value) {
    state.myLists.push(value);
  },
  removeCheckLists(state, index) {
    state.checkLists.splice(index, 1);
  },
  removeMyLists(state, index) {
    state.myLists.splice(index, 1);
  },
  setTags(state, tagsArray) {
    tagsArray.forEach(v => state.tagsSelections.push(v));
    console.log(state.tagsSelections);
  }
};

export const actions = {
  removeCheckLists({ state, commit }, id) {
    const index = state.checkLists.findIndex(shop => shop.id == id);
    commit("removeCheckLists", index);
  },
  removeMyLists({ state, commit }, id) {
    const index = state.myLists.findIndex(shop => shop.id == id);
    commit("removeMyLists", index);
  },
  addCheckLists({ state, commit }, id) {
    const shop = state.shops.find(shop => shop.id == id);
    commit("addCheckLists", shop);
  }
};

export const getters = {
  filterQuery({ filterQuery }) {
    return filterQuery;
  },
  filterdItems({ shops, filterQuery }) {
    let _shops = shops;

    if (filterQuery.tags.length) {
      _shops = _shops.filter(shop => {
        return shop.tags.some(tag => {
          return filterQuery.tags.includes(tag);
        });
      });
    }

    if (filterQuery.budget) {
      _shops = _shops.filter(shop => shop.budget === filterQuery.budget);
    }

    if (filterQuery.users.length) {
      _shops = _shops.filter(shop => {
        return shop.lovers.some(({ name }) => {
          return filterQuery.users.includes(name);
        });
      });
    }
    return _shops;
  },
  getShopById: ({ shops }) => id => {
    return shops.find(shop => shop.id == id);
  },
  selectedShop({ selectedShop }) {
    return selectedShop;
  },
  tagsSelections({ tagsSelections }) {
    return tagsSelections;
  },
  checkLists({ checkLists }) {
    return checkLists;
  },
  isChecked: ({ checkLists }) => id => {
    return checkLists.some(shop => shop.id === id);
  },
  myLists({ myLists }) {
    return myLists;
  },
  hasMyList: ({ myLists }) => id => {
    return myLists.some(shop => shop.id === id);
  }
};
